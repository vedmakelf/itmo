<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        main {
            width: 100%;
            height: 98vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        input {
            width: 185px;
            height: 30px;
        }

        td {
            width: 40px;
            height: 30px;
            border: 1px solid black;
            cursor: pointer;
            text-align: center;
        }
    </style>
</head>
<body>
    <main>
        <div id="calc_container">
            <input type="text" id="display"/>
            <table id="keyboard">
                <tr>
                    <td data-type="C">C</td>
                    <td data-type="(">(</td>
                    <td data-type=")">)</td>
                </tr>
                <tr>
                    <td data-type="7">7</td>
                    <td data-type="8">8</td>
                    <td data-type="9">9</td>
                    <td data-type="/">/</td>
                    <td data-type="//">//</td>
                </tr>
                <tr>
                    <td data-type="4">4</td>
                    <td data-type="5">5</td>
                    <td data-type="6">6</td>
                    <td data-type="*">*</td>
                    <td data-type="%">%</td>
                </tr>
                <tr>
                    <td data-type="1">1</td>
                    <td data-type="2">2</td>
                    <td data-type="3">3</td>
                    <td data-type="-">-</td>
                    <td data-type="^">^</td>
                </tr>
                <tr>
                    <td data-type="0">0</td>
                    <td data-type=".">.</td>
                    <td data-type="=">=</td>
                    <td data-type="+">+</td>
                </tr>
            </table>
        </div>
        <div style="margin-left: 20px;">
            <ul>
                <li><a href="#" onclick="javascript:document.getElementById('display').value = '35 + 4 * 28 / (1 - 5) ^ 2'">Тестовый набор 1</a></li>
                <li><a href="#" onclick="javascript:document.getElementById('display').value = '(-10 + 21) // 100 - 38'">Тестовый набор 3</a></li>
                <li><a href="#" onclick="javascript:document.getElementById('display').value = '(8 + 2 * 5) / (1 + 3 * 2 - 4)'">Тестовый набор 3</a></li>
            </ul>
            <p>Нажмите Enter для вывода результата</p>
        </div>
    </main>
    <script>

        document.getElementById('keyboard').onclick = function (e) {
            var type = e.target.getAttribute('data-type');
            switch (type) {
                case 'C':
                    display.value = "";
                    break;
                case '=':
                    calc();
                    break;
                default:
                    display.value += type;
                    break;

            }
        }

        document.onkeydown = function (e) {
            var reg = new RegExp('^[A-Za-zА-Яа-я]$', 'gi');
            //console.log(e);
            switch (true) {
                case e.ctrlKey:
                    break;
                case reg.test(e.key):
                    event.stopPropagation();
                    return false;
                case e.key === 'Enter':
                    calc();
                    break;
                default:
                    break;
            }
        }

        function calc() {
            var display = document.getElementById('display');
            var str = display.value
            display.value = '';

            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/calc', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send(`value=${encodeURIComponent(str)}`);
            xhr.onreadystatechange = function () {
                if (xhr.readyState != 4) return;
                if (xhr.status != 200) {
                } else {
                    display.value = xhr.responseText;
                }
            }
        }
    </script>
</body>
</html>